$(function(){var r=$("#rowCount").find(":selected").text(),i='<i class="fa fa-spinner fa-pulse fa-lg fa-fw d-block mx-auto text-white"></i><span class="sr-only">Loading...</span>',t=$("#option1, #option2, #option3"),l=new hullabaloo,s=function(t,a){$.ajax({url:baseurl+"admin/report/draft/handler/populate-draft/"+t+"/",type:"GET",dataType:"html",data:{page:t,rows:a},beforeSend:function(){$("#draftTable").html(i)},success:function(t){$("#draftTable").html(""),$("#draftTable").html(t)},fail:function(t,a,e){console.log(e)}})},a=function(t){$.ajax({url:baseurl+"admin/report/handler/id",type:"GET",dataType:"html",data:{repotype:t},success:function(t){$("#repid").val(t)},fail:function(){console.log("Error")}})},e=function(){return $("#tableDraft input:checked").map(function(){return this.value}).get().join("-")};$("#customer").autocomplete({source:function(t,e){$.ajax({url:baseurl+"admin/customers/customer/append-customer",dataType:"json",data:{q:t.term}}).success(function(t){var a=$.map(t,function(t,a){return{label:t.firstname+" "+t.lastname,value:t.firstname+" "+t.lastname,id:t.custid}});e(a)})},minLength:1,select:function(t,a){$("#customerID").val(a.item.id)}}),$("#shapecutField").autocomplete({source:function(t,e){$.ajax({url:baseurl+"admin/report/handler/populate-shapecut",dataType:"json",data:{q:t.term}}).success(function(t){var a=$.map(t,function(t,a){return{label:t.shapecut,value:t.shapecut}});e(a)})},minLength:2}),$("#colorField").autocomplete({source:function(t,e){$.ajax({url:baseurl+"admin/report/handler/populate-color",dataType:"json",data:{q:t.term}}).success(function(t){var a=$.map(t,function(t,a){return{label:t.color,value:t.color}});e(a)})},minLength:2}),t.click(function(){"option1"==this.id?($("#repotype").val($(this).data("value")),a($(this).data("value"))):"option2"==this.id?($("#repotype").val($(this).data("value")),a($(this).data("value"))):"option3"==this.id&&($("#repotype").val($(this).data("value")),a($(this).data("value")))}),s(1,r),$("#pStatus").change(function(){"paid-advance"==$(this).val()?$("#adField").show():$("#adField").hide()}),$("#rowCount").on("change",function(){s(1,this.value)}),$("#searchId").keyup(function(){var t,a=$(this).val();2<=a.length&&(t=a,$.ajax({url:baseurl+"admin/report/draft/handler/populate-draft",type:"GET",dataType:"html",data:{search:!0,id:t},beforeSend:function(){$("#draftTable").html(i)},success:function(t){$("#draftTable").html(""),$("#draftTable").html(t)},fail:function(t,a,e){console.log(e)}}))}),$("#paymentModal").on("hidden.bs.modal",function(t){$("#paymentForm").trigger("reset"),$("#adField").hide()});var n={pagination:function(t){t.preventDefault();var a=$(this).data("ci-pagination-page");s(a,r)},reload:function(t){t.preventDefault(),$("#rowCount").prop("selectedIndex",0),$("#searchId").val(""),s(1,r)},saveDraft:function(t){var a,e,n,o;t.preventDefault(),a=$("#addReportDraft"),e=new FormData,n=$("#customerID").val(),o=a.serializeArray(),$.each(o,function(t,a){e.append(a.name,a.value)}),e.append("customer",n),$.ajax({url:a.attr("action"),type:a.attr("method"),dataType:"JSON",data:e,processData:!1,contentType:!1,beforeSend:function(){$(".btn-save").html(i)},success:function(t){if($(".btn-save").html("Save"),t.auth)return l.send(t.message,"success"),s(1,r),$("#downlaodQrBtn").html('<a href="'+t.url+'" class="btn btn-sm btn-danger mt-3"><i class="fa fa-download fa-fw"></i> Download</a>'),e=null,a.trigger("reset"),!0;l.send(t.message,"danger")},error:function(t,a,e){l.send(e,"danger")}})},payment:function(){$("#pRepId").val($(this).data("id")),$("#pRepType").val($(this).data("type"))},saveAmount:function(t){var a,e,n;t.preventDefault(),a=$("#paymentForm"),e=new FormData,n=a.serializeArray(),$.each(n,function(t,a){e.append(a.name,a.value)}),$.ajax({url:a.attr("action"),type:a.attr("method"),dataType:"JSON",data:e,processData:!1,contentType:!1,beforeSend:function(){$("#payBtnSave").html(i)},success:function(t){if($("#payBtnSave").html("Save"),t.auth)return l.send(t.message,"success"),s(1,r),$("#receiptCount").text(t.total),$("#paymentModal").modal("hide"),e=null,a.trigger("reset"),!0;l.send(t.message,"danger")},error:function(t,a,e){l.send(e,"danger")}})}};$(document).on("click","a[data-action]",function(t){var a=$(this).data("action");"function"==typeof n[a]&&n[a].call(this,t)}),$(document).on("click","td:first-child input",function(){var t=baseurl+"admin/report/print/receipt/"+e();$(this).closest("tr").toggleClass("highlight",this.checked),$("#btnPrint").attr("href",t)}),$(document).on("change","th:first-child input",function(){$(this).closest("table").find(":checkbox").prop("checked",$(this).is(":checked"));var t=baseurl+"admin/report/print/receipt/"+e();$(this).closest("table").find("tr").toggleClass("highlight",this.checked),$("#btnPrint").attr("href",t)})});
//# sourceMappingURL=maps/report.draft.js.map
