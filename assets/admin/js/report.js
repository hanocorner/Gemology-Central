$(function(){var e=$("#radio-1, #radio-2, #radio-3"),t=($("#amount"),null),i=function(e,a){switch(a){case"error":return'<div class="notify-box"><noscript>Sorry, your browser does not support JavaScript!</noscript><div class="error d-flex align-items-center"><img src="'+baseurl+'assets/images/error.png" alt="Error-Image" class="img-fluid"><div>'+e+"<div></div></div>";case"success":return'<div class="notify-box"><noscript>Sorry, your browser does not support JavaScript!</noscript><div class="success d-flex align-items-center"><img src="'+baseurl+'assets/images/success.png" alt="Success-Image" class="img-fluid"><p>'+e+"</p></div></div>";case"info":return'<div class="notify-box"><noscript>Sorry, your browser does not support JavaScript!</noscript><div class="info d-flex align-items-center"><img src="'+baseurl+'assets/images/info.png" alt="Success-Image" class="img-fluid"><p>'+e+"</p></div></div>";default:return"Unable to display Message"}},a=function(e){$.ajax({url:baseurl+"admin/report/handler/id",type:"GET",dataType:"html",data:{repotype:e},success:function(e){$("#id").val(e)},fail:function(){console.log("Error")}})};$("form").on("submit",function(e){var a,t,s,r,o,n;e.preventDefault(),a=this,t=$("#formReport"),s=new FormData(a),r=$("#customerID").val(),o=$("#gemid").val(),n=CKEDITOR.instances.editor1.getData(),s.append("customer",r),s.append("gemid",o),s.append("editor1",n),$.ajax({url:t.attr("action"),type:t.attr("method"),dataType:"JSON",data:s,processData:!1,contentType:!1,beforeSend:function(){$("#messageModal").modal({backdrop:"static",keyboard:!1}),$("#messageModal .modal-body").html(i("Processing","info"))},success:function(e){if($("input[name=csrf_test_name]","#formReport").val(e.csrf),e.auth)return $("#messageModal").modal({backdrop:"static",keyboard:!1}),$("#messageModal .modal-body").html(i(e.message,"success")+'<div class="d-flex align-items-center mt-3"><img src="'+baseurl+'assets/images/qr/temp.png" alt="QR-Code" width="200" height="200"> <a href="'+e.url+'" class="btn btn-danger ml-4"><i class="fa fa-download fa-fw" aria-hidden="true"></i> Download QR</a></div>'),$("#messageModal .modal-footer").html('<a href="'+baseurl+'admin/report/all" class="mr-3">Go to all reports</a><a href="#" id="anotherReport" class="btn btn-primary">Create Another</a>'),$("#messageModal .close").css("display","none"),s=null,$("#imagegem").attr("src",baseurl+"assets/images/default-img.png"),t.trigger("reset"),!0;$("#messageModal").modal({backdrop:"static",keyboard:!1}),$("#messageModal .modal-body").html(i(e.message,"error")),$("#message").html(i(e.message,"error"))},error:function(e,a,t){$("#messageModal").modal("show"),$("#messageModal .modal-body").html(i(t,"error"))}})}),e.click(function(){"radio-1"==this.id?($("#repotype").val($(this).data("value")),a($(this).data("value"))):"radio-2"==this.id?($("#repotype").val($(this).data("value")),a($(this).data("value"))):"radio-3"==this.id&&($("#repotype").val($(this).data("value")),a($(this).data("value")))}),$("input[name=amount]").focusout(function(){var e,a,t;$("input[name=amount]").val((e=$("input[name=amount]").val(),a=Number(e),(1==(t=e.split(".")).length||t[1].length<3)&&(a=a.toFixed(2)),a))}),$("#newGem").autocomplete({source:function(e,t){$.ajax({url:baseurl+"admin/report/gemstone/gem-list",dataType:"json",data:{q:e.term}}).success(function(e){var a=$.map(e,function(e,a){return{label:e.gem_name,value:e.gem_name,id:e.gemid}});t(a)})},minLength:1,select:function(e,a){$("#gemid").val(a.item.id),$("input[name=variety]").val(a.item.value)}}),$("#customer").autocomplete({source:function(e,t){$.ajax({url:baseurl+"admin/customers/customer/append-customer",dataType:"json",data:{q:e.term}}).success(function(e){var a=$.map(e,function(e,a){return{label:e.cus_firstname+" "+e.cus_lastname,value:e.cus_firstname+" "+e.cus_lastname,id:e.custid}});t(a)})},minLength:1,select:function(e,a){$("#customerID").val(a.item.id)}}),$("#sgField").autocomplete({source:function(e,t){$.ajax({url:baseurl+"admin/report/handler/populate-spgroup",dataType:"json",data:{q:e.term}}).success(function(e){var a=$.map(e,function(e,a){return{label:e.spgroup,value:e.spgroup}});t(a)})},minLength:2}),$("#shapecutField").autocomplete({source:function(e,t){$.ajax({url:baseurl+"admin/report/handler/populate-shapecut",dataType:"json",data:{q:e.term}}).success(function(e){var a=$.map(e,function(e,a){return{label:e.shapecut,value:e.shapecut}});t(a)})},minLength:2}),$("#colorField").autocomplete({source:function(e,t){$.ajax({url:baseurl+"admin/report/handler/populate-color",dataType:"json",data:{q:e.term}}).success(function(e){var a=$.map(e,function(e,a){return{label:e.color,value:e.color}});t(a)})},minLength:2}),$("input[name=radio-1]").checkboxradio({icon:!1}),$("#imginput").change(function(){!function(e){var a=e.files[0],t=new Array;if(t.allowedTypes="Not a valid image format, Please upload following file type jpg|jpeg|png|gif ",t.height="Height is too large, Please upload an image less than 1024px",t.width="Width is too large, Please upload an image less than 1024px",t.fileSize="File size is too large, Please upload an image less than 2MB",!new RegExp("([a-zA-Z0-9s_\\.-:])+(.jpg|.jpeg|.png|.gif)$").test(e.value.toLowerCase()))return alert(t.allowedTypes);if(2e6<a.size)return alert(t.fileSize);if(e.files&&e.files[0]){var s=new FileReader;s.onload=function(a){var e=new Image;e.src=a.target.result,e.onload=function(){var e=this.height;return 1024<this.width?(alert(t.width),!1):1024<e?(alert(t.height),!1):($("#imagegem").attr("src",a.target.result),!0)}},s.readAsDataURL(e.files[0])}$("#removeImg").on("click",function(){$("#imagegem").attr("src",baseurl+"assets/images/default-img.png"),$("#imginput").val("")})}(this)}),$("#messageModal").on("click","#anotherReport",function(e){e.preventDefault(),location.reload()}),$("#gemModal").on("click","#saveGem",function(){var a;a=$("#formGemstone"),t=$("#gemModal #message"),$.ajax({url:a.attr("action"),type:a.attr("method"),dataType:"JSON",data:{gemName:$("#gemName").val(),gemDesc:$("#gemDesc").val(),csrf_test_name:$("#formGemstone  input[name=csrf_test_name]").val()},beforeSend:function(){t.html(i("Processing...","info"))},success:function(e){if($("#formGemstone  input[name=csrf_test_name]").val(e.csrf),e.auth)return t.html(i(e.message,"success")),null,a.trigger("reset"),setTimeout(function(){t.html("")},5e3),!0;t.html(i(e.message,"error"))},fail:function(e){t.html(i(e,"error"))}})})});
//# sourceMappingURL=maps/report.js.map
