{"version":3,"sources":["main.js"],"names":["$","formData","message","Array","messageBox","formLogin","spinnerSelector","spinner","rows","find","text","renderAllReportData","msg","type","baseurl","page","ajax","url","dataType","data","beforeSend","html","success","fail","jqXHR","textStatus","errorThrown","console","log","updatePayment","status","receipt","id","inputAmount","FormData","append","response","on","event","preventDefault","this","attr","processData","contentType","auth","location","href","val","csrf","uri","window","pathname","split","value","btnActions","pagination","e","reloadAllReports","searchReport","search","customer","color","shape","width","weight","psUnpaid","reportID","psPaidA","psPaidF","document","action","call"],"mappings":"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","file":"../main.js","sourcesContent":["$(function () {\r\n\r\n\t/* Varibales */\r\n\tvar formData = null;\r\n\tvar message = new Array();\r\n\tvar messageBox = $('#messageBox');\r\n\tvar formLogin = $('#formLogin');\r\n\t//var hulla = new hullabaloo();\r\n\tvar spinnerSelector = $('#spinner');\r\n\tvar spinner = '<i class=\"fa fa-spinner fa-spin fa-lg fa-fw d-block mx-auto text-primary mt-3\"></i><span class=\"sr-only\">Loading...</span>';\r\n\tvar rows = $('#rowCount').find(\":selected\").text();\r\n\r\n\t/* Functions */\r\n\r\n\t//\r\n\tvar message = function (msg, type) {\r\n\t\tvar box;\r\n\t\tswitch (type) {\r\n\t\t\tcase 'error':\r\n\t\t\t\treturn '<div class=\"notify-box\">' +\r\n\t\t\t\t\t'<noscript>Sorry, your browser does not support JavaScript!</noscript>' +\r\n\t\t\t\t\t'<div class=\"error d-flex align-items-center\">' +\r\n\t\t\t\t\t'<img src=\"' + baseurl + 'assets/images/error.png\" alt=\"Error-Image\" class=\"img-fluid\">' +\r\n\t\t\t\t\t'<div>' + msg + '<div>' +\r\n\t\t\t\t\t'</div>' +\r\n\t\t\t\t\t'</div>';\r\n\t\t\tcase 'success':\r\n\t\t\t\treturn '<div class=\"notify-box\">' +\r\n\t\t\t\t\t'<noscript>Sorry, your browser does not support JavaScript!</noscript>' +\r\n\t\t\t\t\t'<div class=\"success d-flex align-items-center\">' +\r\n\t\t\t\t\t'<img src=\"' + baseurl + 'assets/images/success.png\" alt=\"Success-Image\" class=\"img-fluid\">' +\r\n\t\t\t\t\t'<p>' + msg + '</p>' +\r\n\t\t\t\t\t'</div>' +\r\n\t\t\t\t\t'</div>';\r\n\t\t\tcase 'info':\r\n\t\t\t\treturn '<div class=\"notify-box\">' +\r\n\t\t\t\t\t'<noscript>Sorry, your browser does not support JavaScript!</noscript>' +\r\n\t\t\t\t\t'<div class=\"info d-flex align-items-center\">' +\r\n\t\t\t\t\t'<img src=\"' + baseurl + 'assets/images/info.png\" alt=\"Success-Image\" class=\"img-fluid\">' +\r\n\t\t\t\t\t'<p>' + msg + '</p>' +\r\n\t\t\t\t\t'</div>' +\r\n\t\t\t\t\t'</div>';\r\n\t\t\tdefault:\r\n\t\t\t\treturn 'Unable to display Message';\r\n\t\t}\r\n\t}\r\n\r\n\t// User Login\r\n\tvar login = function (fm) {\r\n\r\n\t\tformData = new FormData(fm);\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: formLogin.attr(\"action\"),\r\n\t\t\ttype: formLogin.attr(\"method\"),\r\n\t\t\tdataType: 'JSON',\r\n\t\t\tdata: formData,\r\n\t\t\tprocessData: false,\r\n\t\t\tcontentType: false,\r\n\t\t\tbeforeSend: function () {\r\n\t\t\t\tmessageBox.html(message('Processing...', 'info'));\r\n\t\t\t},\r\n\t\t\tsuccess: function (response) {\r\n\t\t\t\tif (response.auth) {\r\n\t\t\t\t\tmessageBox.html(message(response.message, 'success'));\r\n\t\t\t\t\tlocation.href = response.url;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$('input[name=csrf_test_name]').val(response.csrf);\r\n\t\t\t\t\tmessageBox.html(message(response.message, 'error'));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfail: function () {\r\n\t\t\t\tconsole.log('Error');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// Executing functions according to url\r\n\tvar urlBasedAction = function () {\r\n\t\treturn window.location.pathname.split('/');\r\n\t};\r\n\r\n\t// Fetch Latest Activities\r\n\tvar latestActivities = function () {\r\n\t\t$.ajax({\r\n\t\t\turl: baseurl + 'admin/dashboard/account/latest_activities',\r\n\t\t\ttype: 'GET',\r\n\t\t\tdataType: 'html',\r\n\t\t\tbeforeSend: function () {\r\n\t\t\t\tspinnerSelector.html(spinner);\r\n\t\t\t},\r\n\t\t\tsuccess: function (data) {\r\n\t\t\t\tspinnerSelector.html('');\r\n\t\t\t\t$('#latestActivity').html(data);\r\n\t\t\t},\r\n\t\t\tfail: function () {\r\n\t\t\t\tconsole.log('Error');\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t// Fetch all reports\r\n\tvar renderAllReportData = function (page, rows) {\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: baseurl + 'admin/report/handler/fetch-all/' + page + '/',\r\n\t\t\ttype: 'GET',\r\n\t\t\tdataType: 'html',\r\n\t\t\tdata: {\r\n\t\t\t\tpage: page,\r\n\t\t\t\trows: rows\r\n\t\t\t},\r\n\t\t\tbeforeSend: function () {\r\n\t\t\t\t$('#allReportData').html(spinner);\r\n\t\t\t},\r\n\t\t\tsuccess: function (data) {\r\n\t\t\t\t$('#allReportData').html('');\r\n\t\t\t\t$('#allReportData').html(data);\r\n\t\t\t},\r\n\t\t\tfail: function (jqXHR, textStatus, errorThrown) {\r\n\t\t\t\tconsole.log(errorThrown);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t// Search Report\r\n\tvar searchReportData = function () {\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: baseurl + 'admin/report/handler/fetch-all',\r\n\t\t\ttype: 'GET',\r\n\t\t\tdataType: 'html',\r\n\t\t\tdata: {\r\n\t\t\t\tsearch: true,\r\n\t\t\t\tcustomer: $('#qCustomer').val(),\r\n\t\t\t\tcolor: $('#qColor').val(),\r\n\t\t\t\tshape: $('#qShape').val(),\r\n\t\t\t\twidth: $('#qWidth').val(),\r\n\t\t\t\tweight: $('#qWeight').val()\r\n\t\t\t},\r\n\t\t\tbeforeSend: function () {\r\n\t\t\t\t$('#allReportData').html(spinner);\r\n\t\t\t},\r\n\t\t\tsuccess: function (data) {\r\n\t\t\t\t$('#allReportData').html('');\r\n\t\t\t\t$('#allReportData').html(data);\r\n\t\t\t},\r\n\t\t\tfail: function (jqXHR, textStatus, errorThrown) {\r\n\t\t\t\tconsole.log(errorThrown);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t//\r\n\tvar updatePayment = function (status, receipt, id, inputAmount) {\r\n\t\tformData = new FormData();\r\n\r\n\t\tif(inputAmount == '' || inputAmount == null)\r\n\t\t{\r\n\t\t\tformData.append('amount', 0.00);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tformData.append('amount', inputAmount);\r\n\t\t}\r\n\t\t\r\n\t\tformData.append('status', status);\r\n\t\tformData.append('id', id);\r\n\t\tformData.append('isreceipt', receipt);\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: baseurl + 'admin/report/handler/update-payment',\r\n\t\t\ttype: 'GET',\r\n\t\t\tdataType: 'JSON',\r\n\t\t\tdata: formData,\r\n\t\t\tbeforeSend: function () {\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tsuccess: function (response) {\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tfail: function (jqXHR, textStatus, errorThrown) {\r\n\t\t\t\tconsole.log(errorThrown);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\t\r\n\r\n\t/* Binding */\r\n\r\n\t// Create\r\n\r\n\tformLogin.on(\"submit\", function (event) {\r\n\t\tevent.preventDefault();\r\n\t\tlogin(this);\r\n\t});\r\n\r\n\tvar uri = urlBasedAction();\r\n\r\n\tif (uri[2] == 'dashboard') {\r\n\t\tlatestActivities();\r\n\t}\r\n\r\n\tif (uri[2] == 'report' && uri[3] == 'all') {\r\n\t\trenderAllReportData(1, rows);\r\n\r\n\t\t$('#rowCount').on('change', function () {\r\n\t\t\trenderAllReportData(1, this.value);\r\n\t\t});\r\n\r\n\t\t//\r\n\t\tvar btnActions = {\r\n\t\t\tpagination: function (e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tvar page = $(this).data(\"ci-pagination-page\");\r\n\t\t\t\trenderAllReportData(page, rows);\r\n\t\t\t},\r\n\t\t\treloadAllReports: function (e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\trenderAllReportData(1, rows);\r\n\t\t\t},\r\n\t\t\tsearchReport: function (e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tsearchReportData();\r\n\t\t\t},\r\n\t\t\tpsUnpaid: function (e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tvar reportID = $('#reportId').val();\r\n\t\t\t\tvar status = $(this).data('value');\r\n\r\n\t\t\t\tupdatePayment(status, 0, reportID, 0.00);\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tpsPaidA: function (e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tvar inputAmount = $('input[name=amountUpdate').val();\r\n\t\t\t\tvar reportID = $('#reportId').val();\r\n\t\t\t\tvar status = $(this).data('value');\r\n\r\n\t\t\t\tupdatePayment(status, 1, reportID, inputAmount);\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tpsPaidF: function (e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tvar inputAmount = $('input[name=amountUpdate').val();\r\n\t\t\t\tvar reportID = $('#reportId').val();\r\n\t\t\t\tvar status = $(this).data('value');\r\n\r\n\t\t\t\tupdatePayment(status, 1, reportID, inputAmount);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t$(document).on(\"click\", 'a[data-action]', function (event) {\r\n\t\t\tvar link = $(this);\r\n\t\t\tvar action = link.data(\"action\");\r\n\r\n\t\t\tif (typeof btnActions[action] === \"function\") {\r\n\t\t\t\tbtnActions[action].call(this, event);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t}\r\n\r\n}); // End of document ready"]}